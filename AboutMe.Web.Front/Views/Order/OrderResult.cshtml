@model AboutMe.Domain.Entity.Order.ORDER_STEP2_MODEL
@{
    ViewBag.Title = "주문/결제 완료 - ABOUT ME";
    ViewBag.TopClass = "order end";

    if (!Model.UserProfile.IS_LOGIN)
    {
        ViewBag.TopClass += " nonmb";
    }
    Layout = "~/Views/Shared/_AboutMeLayoutB.cshtml";
    
    string productImgPath = AboutMe.Common.Helper.Config.GetConfigValue("ProductPhotoPath");
}
@section Scripts {
<link href="/aboutCom/css/cart.css" rel="stylesheet" />
    <script language="javascript">
        var openwin = window.open("/Content/child.html", "childwin", "width=300,height=150");
        openwin.close();
    </script>
}
@helper GridHeader()
{
    if (Model.UserProfile.IS_LOGIN == true)
    {
        if (Model.UserProfile.M_GBN == "S") //임직원
        {
            <colgroup>
                <col width="136" />
                <col width="*" />
                <col width="120" />
                <col width="120" />
                <col width="94" />
                <col width="104" />
                <col width="114" />
                <col width="127" />
            </colgroup>
            <thead>
                <tr>
                    <th colspan="2">상품명</th>
                    <th>상품금액</th>
                    <th>임직원금액</th>
                    <th>수량</th>
                    <th>쿠폰적용</th>
                    <th>예상적립 포인트</th>
                    <th>주문금액</th>
                </tr>
            </thead>
        }
        else
        {
            <colgroup>
                <col width="163" />
                <col width="*" />
                <col width="159" />
                <col width="121" />
                <col width="100" />
                <col width="141" />
                <col width="160" />
            </colgroup>
            <thead>
                <tr>
                    <th colspan="2">상품명</th>
                    <th>상품금액</th>
                    <th>수량</th>
                    <th>쿠폰할인</th>
                    <th>예상적립 포인트</th>
                    <th>주문금액</th>
                </tr>
            </thead>
        }
    }
    else
    {
        <colgroup>
            <col width="163" />
            <col width="*" />
            <col width="222" />
            <col width="117" />
            <col width="241" />
        </colgroup>
        <thead>
            <tr>
                <th colspan="2">상품명</th>
                <th>상품금액</th>
                <th>수량</th>
                <th>주문금액</th>
            </tr>
        </thead>
    }
}


<!--container-->
<div id="container">
    <div class="container1080">
    @if (!Model.OrderResult.Resultcode.Equals("00"))
    {

        <div style='text-align:center;font-size:40px;font-weight:bold;'>주문 에러</div>
        <div class="orderform">
            <div class="orderwrap">
                <div class=" payinfo contypea mt20">
                        <div>
                            <span style="display:inline-block;position:relative;width:150px}">에러메시지 :</span>
                            <span style="display:inline-block;position:relative;width:400px">@Model.OrderResult.ResultMsg</span>
                        </div>
                        <div>
                            <span style="display:inline-block;position:relative;width:150px;margin-top:15px;">에러코드 :</span>
                            <span style="display:inline-block;position:relative;width:400px">@Model.OrderResult.ResultErrorCode</span>
                        </div>
                        <div>
                            <span style="display:inline-block;position:relative;width:150px;margin-top:15px;">Order IDX :</span>
                            <span style="display:inline-block;position:relative;width:400px">@Model.OrderResult.ORDER_IDX</span>
                        </div>
                        <div>
                            <span style="display:inline-block;position:relative;margin-top:15px;color:#1b1818;text-align:center;font-size:15px;font-weight:bold;color:#ff0000">* 결제도중 에러가 발생했습니다. 재주문하시기 바랍니다.</span>
                            
                        </div>
                   
                </div>
            </div>
        </div>
        
    }
    else
    {
            if (Model.DetailInfo == null)
            {
                Response.Write("<script>alert('존재하지 않은 게시물입니다.'); history.go(-1);</script>");
                Response.End();
            }
        
        <h2><img src="/aboutCom/images/cart/h2_orderend.png" alt="주문 완료" /></h2>
        <ol class="orderstep">
            <li class="step1"><span>주문/결제</span></li>
            <li class="step2"><em>주문 완료</em></li>
        </ol>
        <div class="clear"></div>
        <div class="orderform">
            <form name="frm" action="">
                <fieldset>
                    <legend>주문 상품 결제옵션 폼</legend>
                    <div class="row1 tabletypeb">
                        <table summary="상품명, 상품금액, 수량, 쿠폰적용, 예상적립 포인트, 주문금액">
                            <caption>주문상품 확인</caption>
                            @GridHeader()
                            <tbody>
                               @foreach (var item in Model.ProductList)
                               {
                                   string imgUrl1 = productImgPath + "R120_" + item.P_IMG1_S;
                                        
                                <tr>
                                    <td class="proimg">
                                        <a href="/shopping/detail?pcode=@item.P_CODE"><img src="@imgUrl1" alt="상품 이미지" /></a>
                                    </td>
                                    <td class="product">
                                        <dl>
                                            <dt>
                                                <a href="#">
                                                    <span class="tag">
                                                        @if (item.ICON_BEST == 1)
                                                        {
                                                            <text> <span class="ico_best">BEST</span></text>
                                                        }
                                                        @if (item.ICON_SOLDOUT == 1)
                                                        {
                                                            <text> <span class="ico_soldout">SOLD OUT</span></text>
                                                        }
                                                        @if (item.ICON_NEW == 1)
                                                        {
                                                            <text> <span class="ico_new">NEW</span></text>
                                                        }
                                                        @if (item.ICON_CUSTOM == 1)
                                                        {
                                                            <text> <span class="ico_custom">커스텀</span></text>
                                                        }

                                                        @if (item.ICON_SET == 1)
                                                        {
                                                            <text> <span class="ico_set">SET</span></text>
                                                        }
                                                        @if (item.ICON_ONEPLUS == 1)
                                                        {
                                                            <text> <span class="ico_1_1">1+1</span></text>
                                                        }
                                                        @if (item.ICON_TIME == 1)
                                                        {
                                                            <text> <span class="ico_time">TIME</span></text>
                                                        }

                                                        @if (item.ICON_COUPON == 1)
                                                        {
                                                            <text> <span class="ico_coupon">COUPON</span></text>
                                                        }
                                                    </span>
                                                    @(new HtmlString(item.P_NAME))
                                                </a>
                                            </dt>
                                            <dd>@(new HtmlString(item.P_SUB_TITLE))</dd>
                                        </dl>
                                    </td>
                                    <td class="proprice">
                                        @if (@item.SELLING_PRICE != @item.DISCOUNT_PRICE)
                                        {
                                            <del>@item.SELLING_PRICE.ToString("#,#0.") 원</del>
                                        }
                                        <strong>@String.Format("{0:#,#0.}", @item.DISCOUNT_PRICE)</strong>원
                                    </td>
                                    @if (Model.UserProfile.M_GBN == "S") //임직원
                                    {
                                        <td class="vipprice">
                                            <strong>@item.EMP_DISCOUNT_PRICE.ToString("#,#0.")</strong>원
                                        </td>
                                    }
                                    <td class="count">
                                        <div class="relbox">
                                            @item.P_COUNT
                                            @if (item.PROMOTION_TYPE == "02") //1+1
                                            {
                                                <span class="onenone">
                                                    <i>+1</i>
                                                    <span class="tooltip">동일한 상품이 하나 더 배송되는<br />1+1 상품입니다.</span>
                                                </span>
                                            }
                                        </div>
                                    </td>
                                    @if (Model.UserProfile.IS_LOGIN == true)
                                    {
                                        <td class="coupon">
                                            <strong>@String.Format("{0:#,#0.}", item.COUPON_DISCOUNT_AMT)</strong>원<br />
                                        </td>
                                        <td class="point">
                                            <span class="val">@String.Format("{0:#,#0.}", item.POINT_ACCML)</span>
                                        </td>
                                    }
                                    <td class="ordprice"><strong>@String.Format("{0:#,#0.}", item.COUPON_DISCOUNT_PRICE)</strong>원</td>
                                </tr>
                               }
                            </tbody>
                        </table>
                    </div>
                    <div class="orderwrap">
                        <h3>주문 입력정보</h3>
                        <div class="saleapply boxtyped mt20">
                            <ul>
                                <li class="product">
                                    <p class="tot"><span class="tit">상품 금액</span><span class="price"><strong>@String.Format("{0:#,#0.}", Model.DetailInfo.TOTAL_PRICE + Model.DetailInfo.TRANS_PRICE)</strong>원</span></p>
                                    <p><span class="tit">상품 금액</span><span class="price"><strong>@String.Format("{0:#,#0.}", Model.DetailInfo.TOTAL_PRICE)</strong> 원</span></p>
                                    <p><span class="tit">배송비</span><span class="price"><strong>@String.Format("{0:#,#0.}", Model.DetailInfo.TRANS_PRICE)</strong> 원</span></p>
                                </li>
                                <li class="sale">
                                    <p class="tot"><span class="tit">할인 금액</span><span class="price"><strong>@String.Format("{0:#,#0.}", Model.DetailInfo.DISCOUNT_AMT)</strong>원</span></p>
                                    @if (Model.UserProfile.IS_LOGIN == true && Model.UserProfile.M_GBN == "S")
                                    {
                                        <p><span class="tit">임직원할인</span><span class="price"><strong>@String.Format("{0:#,#0.}", Model.DetailInfo.EMP_DISCOUNT_AMT)</strong> 원</span></p>
                                    }
                                    <p><span class="tit">쿠폰 할인</span><span class="price"><strong>@String.Format("{0:#,#0.}", Model.DetailInfo.COUPON_DISCOUNT_AMT)</strong> 원</span></p>
                                    <p><span class="tit">보유 포인트 사용</span><span class="price point"><i></i><strong>@String.Format("{0:#,#0.}", Model.DetailInfo.POINT_USE_PRICE)</strong></span></p>
                                    @if (Model.UserProfile.IS_LOGIN == true)
                                    {
                                        <p><span class="tit">회원할인</span><span class="price"><strong>@String.Format("{0:#,#0.}", Model.DetailInfo.GRADE_DISCOUNT_AMT)</strong> 원</span></p>
                                    }
                                </li>
                                <li class="total">
                                    <p class="tot"><span class="tit">총 결제 금액</span><span class="price"><strong>@String.Format("{0:#,#0.}", Model.DetailInfo.TOTAL_PAY_PRICE)</strong>원</span></p>
                                    <p><span class="tit">예상 적립포인트</span><span class="price point"><i></i><strong>@String.Format("{0:#,#0.}", Model.DetailInfo.ACCML_POINT)</strong></span></p>
                                    @if (Model.UserProfile.IS_LOGIN == true)
                                    {
                                        <p><span class="info"><i></i>최종 결제금액 기준으로 포인트 적립됩니다.</span></p>
                                    }
                                    else
                                    {
                                        <p><span class="info"><i></i>회원만 적립 가능합니다.</span></p>
                                    }
                                </li>
                            </ul>

                        </div>
                        <div class="addrinfo contypea divstylea mt20">
                            <!-- 주소 정보(기본정보 / 배송지 정보) -->
                            <div class="buyerinfo divitem">
                                <div class="tit_h4">
                                    <h4><img src="/aboutCom/images/cart/h4_buyerinfo.png" alt="주문자 정보" /></h4>
                                </div>
                                <div class="tabletypea">
                                    <table>
                                        <caption>기본정보 표</caption>
                                        <colgroup>
                                            <col width="110" />
                                            <col width="*" />
                                        </colgroup>
                                        <tbody>
                                            <tr>
                                                <th>주문하시는 분</th>
                                                <td>@Model.DetailInfo.ORDER_NAME</td>
                                            </tr>
                                            <tr>
                                                <th>주소</th>
                                                <td class="addr">
                                                    @Model.DetailInfo.SENDER_POST<br />
                                                    @Model.DetailInfo.SENDER_ADDR1<br />
                                                    @Model.DetailInfo.SENDER_ADDR2
                                                </td>
                                            </tr>
                                            <tr>
                                                <th>전화번호</th>
                                                <td class="phone">@Model.DetailInfo.SENDER_TEL</td>
                                            </tr>
                                            <tr>
                                                <th>휴대폰</th>
                                                <td class="phone">@Model.DetailInfo.SENDER_HP</td>
                                            </tr>
                                            <tr>
                                                <th>이메일</th>
                                                <td class="email">@Model.DetailInfo.SENDER_EMAIL</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="receiveinfo divitem">
                                <div class="tit_h4">
                                    <h4><img src="/aboutCom/images/cart/h4_receiveinfo.png" alt="배송지 정보" /></h4>
                                </div>
                                <div class="tabletypea">
                                    <table>
                                        <caption>배송지 정보 표</caption>
                                        <colgroup>
                                            <col width="110" />
                                            <col width="*" />
                                        </colgroup>
                                        <tbody>
                                            <tr>
                                                <th>받으시는 분</th>
                                                <td>@Model.DetailInfo.RECEIVER_NAME</td>
                                            </tr>
                                            <tr>
                                                <th>주소</th>
                                                <td class="addr">
                                                    @Model.DetailInfo.RECEIVER_POST<br />
                                                    @Model.DetailInfo.RECEIVER_ADDR1<br />
                                                    @Model.DetailInfo.RECEIVER_ADDR2
                                                </td>
                                            </tr>
                                            <tr>
                                                <th>전화번호</th>
                                                <td class="phone">@Model.DetailInfo.RECEIVER_TEL</td>
                                            </tr>
                                            <tr>
                                                <th>휴대폰</th>
                                                <td class="phone">@Model.DetailInfo.RECEIVER_HP</td>
                                            </tr>
                                            <tr>
                                                <th>배송시 요청사항</th>
                                                <td class="comment">@Model.DetailInfo.ORDER_MEMO</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <!-- //주소 정보(기본정보 / 배송지 정보) -->
                        </div>
                        <div class="payinfo contypea mt20">
                            <!-- 결제 정보 -->
                            <div class="tit_h4">
                                <h4><img src="/aboutCom/images/cart/h4_payinfo.png" alt="결제 정보" /></h4>
                            </div>
                            <ul class="payview">
                                <li>
                                    <em>주문 번호</em><span>@Model.DetailInfo.ORDER_CODE</span>
                                </li>
                                <li>
                                    <em>결제 수단</em><span>@Model.DetailInfo.PAY_GBN_NM</span>
                                </li>
                                @if (!Model.DetailInfo.NOMEMBER_PASS.IsEmpty())
                                { 
                                <li>
                                    <em>비회원비밀번호</em><span>@Model.DetailInfo.NOMEMBER_PASS</span>
                                </li>
                                }
                                <li>
                                    <em>TID</em><span>@Model.DetailInfo.PAT_TID</span>
                                </li>
                            </ul>
                            @if (Model.DetailInfo.PAY_GBN == "3") //가상계좌
                            { 
                            <ul class="payview ea4">
                                <li>
                                    <em>가상계좌번호</em><span>@Model.DetailInfo.VACT_Num</span>
                                </li>
                                <li>
                                    <em>입금은행</em><span>@Model.DetailInfo.VACT_BankName</span>
                                </li>
                                <li>
                                    <em>예금주명</em><span>@Model.DetailInfo.VACT_Name</span>
                                </li>
                                <li>
                                    <em>입금 예정일</em><span>@Model.DetailInfo.VACT_Date 까지</span>
                                </li>
                            </ul>
                            }
                            <!-- //결제 정보 -->
                        </div>
                        <div class="deliveryinfo contypea mt20">
                            <!-- 배송 안내 -->
                            <div class="tit_h4">
                                <h4><img src="/aboutCom/images/cart/h4_deliveryinfo.png" alt="배송 안내" /></h4>
                            </div>
                            <div>
                                <div class="contact">
                                    <img src="/aboutCom/images/sample/thum_hanjin.jpg" alt="한진택배" />
                                    <span class="callnum"><i></i>1588-0011</span>
                                </div>
                                <div class="tabletypea">
                                    <table>
                                        <caption>배송 정보 표</caption>
                                        <colgroup>
                                            <col width="75" />
                                            <col width="*" />
                                        </colgroup>
                                        <tbody>
                                            <tr>
                                                <th>배송비</th>
                                                <td>2500원(단, 제주도 및 도서산간지역은 추가 운임료 발생)</td>
                                            </tr>
                                            <tr>
                                                <th>배송기간</th>
                                                <td>입금완료 확인 후 2-5일 이내에 배송됩니다.(단, 제주도 및 도서산간지역은 추가기간 발생) 고객님의 연락두절 및 부재 등으로 인하여 반송된 경우에는 왕복 택배비가 부과 됩니다. 연락처 및 주소를 정확히 기입해 주시기 바랍니다.</td>
                                            </tr>
                                            <tr>
                                                <th>배송전 취소 및 변경</th>
                                                <td>
                                                    게시판 또는 웹상에서 접수하신 경우 처리가 지연.(누락)될 수 있사오니, 신속한 처리를 위하여<br />고객센터로 문의 부탁드립니다
                                                    <span class="info"><i></i>단, 오후 2시 이후 상품취소 및 옵션변경 불가</span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <!-- //배송 안내 -->
                        </div>
                        <div class="returninfo contypea">
                            <!-- 주문 취소 / 교환 / 반품 안내 -->
                            <div class="tit_h4">
                                <h4><img src="/aboutCom/images/cart/h4_returninfo.png" alt="주문 취소 / 교환 / 반품 안내" /></h4>
                            </div>
                            <p class="txt">
                                교환 및 반품은 물품 수령 후 <strong>7일 이내</strong>에 접수(전화 및 게시판)후 당사에 입고된 상품에 한하여 처리됩니다.<br />
                                시일이 지난 상품에 대해서는 처리가 되지 않습니다.(물품훼손/ 빈 포장폐기 및 물품가치를 상실할 경우에는 불가합니다.) <br />
                                교환 및 반품 신청 시에는 <strong>해당구매 사이트</strong>를 통하여 해주시길 바랍니다. 신청하지 않고 임의 발송하신 경우 처리가 지연될 수 있습니다.<br />
                                (상품을 보내실 때 발송 시 동봉되었던 교환/반품 요청서를 작성하여 함께 보내주시면 신속하고 원활한 처리가 이루어집니다.) <br />
                                <br />
                                <em>불량 및 오배송 등으로 인한 교환</em><br />
                                맞교환은 불가하며 교환 상품이 물류센터에 도착하여 상품 확인 후 처리가 가능합니다.<br />
                                왕복운송료는 모두 ㈜삼양제넥스에서 부담합니다. 단, 동일상품이 아닌 다른 칼라나 사이즈 등으로 교환 원하시는 경우에는 고객 변심으로 처리됩니다.<br />
                                (교환택배 구매자 부담)<br />
                                <br />
                                <em>교환 및 반품이 불가한 상품</em><br />
                                0000000내용 아직 없음 자리만 만들어주면 됨<br />
                                00000<br />
                                <br />
                                <em>교환 및 반품 배송비 결제시</em><br />
                                무료배송 상품, 단순교환일 경우 5000원(동봉 또는 계좌)을 지불하셔야 합니다. 선결제, 착불, 단순 반품 및 교환일 경우<br />
                                모두 5000원을 지불하셔야 하며, 선결제 배송비는 상품금액 + 배송료 모두 함께 환불됩니다.<br />
                                <br />
                                <em>교환 및 반품 배송비 계좌</em><br />
                                교환 및 반품 배송비는 아래 계좌로 입금해 주십시오.<br />
                                은행명 : 00은행 / 계좌번호 000-000-00000 예금주 00000<br />
                                (동봉시 분실 및 분쟁의 소지가 있사오니 가급적 계좌로 입금 부탁 드립니다.)
                            </p>
                            <!-- //주문 취소 / 교환 / 반품 안내 -->
                        </div>
                        <div class="btn_orderend mt40">
                            <a href="/MyPage/MyOrder/" class="btn_brown_w185h60">
                                주문/조회하기
                            </a><a href="/" class="btn_gray_w185h60">
                                쇼핑 계속하기
                            </a><a href="#none" class="btn_white_w185h60" onclick="window.print();">프린트</a>
                        </div>
                    </div>
                </fieldset>
            </form>
        </div>
    }    
    </div>
</div>
<!--//container-->
